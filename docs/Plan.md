# План автоматизации тестирования

## 1. Перечень автоматизируемых сценариев
### Обычная оплата по карте
#### Позитивные сценарии
1. **Оплата одобрена** — использование номера карты со статусом APPROVED и валидных данных, например:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: 02
   3. Год: 26
   4. Владелец: IVAN ABRAMOV
   5. CVC/CVV: 456
   
2. **Отправка формы с годом на 5 лет больше текущего (граничное значение)** — пример тестовых данных:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: 02
   3. Год: ввести год на 5 больше текущего (для 2022 года - ввести значение "27")
   4. Владелец: ANDREY KASHIN
   5. CVC/CVV: 248

3. **Отправка формы с годом на 4 года больше текущего (ниже граничного значения)** — пример тестовых данных:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: 02
   3. Год: ввести год на 4 больше текущего (для 2022 года - ввести значение "26")
   4. Владелец: ANDREY KASHIN
   5. CVC/CVV: 248

4. **Отправка формы со сроком действия карты, истекающем в текущем месяце (граничное значение)** — пример тестовых данных:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: текущий месяц (для данной работы - ввести значение "11")
   3. Год: текущий год (для данной работы - ввести значение "22")
   4. Владелец: ANDREY KASHIN
   5. CVC/CVV: 248

5. **Отправка формы со сроком действия карты, истекающем в следующем месяце (выше граничного значения)** — пример тестовых данных:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: следующий месяц (для данной работы - ввести значение "12")
   3. Год: год следующего месяца (например, если текущий месяц/год — 12/22, тогда следующий месяц - 01 и год 23; для данной работы - ввести значение "22")
   4. Владелец: ANDREY KASHIN
   5. CVC/CVV: 248

6. **Отправка формы с именем владельца длиной 26 символов (включая пробел)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: ALEXANDRA SKOROPOSTIZHNAYA
    5. CVC/CVV: 248

7. **Отправка формы с именем владельца длиной 27 символов (включая пробел)** — пример тестовых данных:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: 07
   3. Год: 23
   4. Владелец: ALEKSANDRA SKOROPOSTIZHNAYA
   5. CVC/CVV: 248

   <details>
        <summary>Почему длина не более 27 символов?</summary>
        Удалось нагуглить, что кол-во символов в имени на карте регулируется стандартами ISO/IEC 7813 и ISO/IEC 7811-1. Последний - конкретно про печать символов на карте, и, как я понимаю, там допустимая длина в 27 символов, включая пробел.
        А очень хотелось бы читать требования к тестируемой системе, конечно...
   </details>

8. **Отправка формы с именем владельца, содержащим дефис** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: KALINA-NIKOLAY IVANOV
    5. CVC/CVV: 248

9. **Отправка формы с нулевым кодом CVC/CVV** — пример тестовых данных:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: 08
   3. Год: 23
   4. Владелец: ZEROINA ZEROYEVA
   5. CVC/CVV: 000

   <details>
      <summary>Почему так? Разве такой код не считается небезопасным?</summary>
      Я нашла только подтверждение, что такой код может быть, и что некоторые сервисы его принимают. <a src="https://security.stackexchange.com/questions/200243/all-0s-zeros-in-a-bank-cards-cvc-code">Здесь пруф</a><br>
      Т.к. у меня нет документации и требований к тестируемому сервису, я буду считать этот сценарий позитивным.
   </details>

*Ожидаемый результат во всех позитивных сценариях:* Уведомление об успешном одобрении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля payment_id, и запись в таблицу payment_entity со статусом APPROVED)


#### Негативные сценарии
##### Номер карты со статусом DECLINED
10. **Оплата отклонена** — использование номера карты со статусом DECLINED и валидных данных, например:
    1. Номер карты: 4444 4444 4444 4442
    2. Месяц: 10
    3. Год: 24
    4. Владелец: ALINA POKLONSKAYA
    5. CVC/CVV: 746

   *Ожидаемый результат:* Уведомление об отклонении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля payment_id, и запись в таблицу payment_entity со статусом DECLINED)

##### Проверки на пустоту
11. **Отправка формы без номера карты** — пример тестовых данных:
    1. Номер карты оставить пустым
    2. Месяц: 08
    3. Год: 23
    4. Владелец: POLINA POLYAKOVA
    5. CVC/CVV: 768

   *Ожидаемый результат:* под полем с номером карты видно уведомление "Неверный формат"

12. **Отправка формы без указания месяца** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц оставить пустым
    3. Год: 23
    4. Владелец: EKATERINA DOROFEEVA
    5. CVC/CVV: 534

   *Ожидаемый результат:* под полем с номером месяца видно уведомление "Неверный формат"

13. **Отправка формы без указания года** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 09
    3. Год оставить пустым
    4. Владелец: KSENIYA ABRAMOVA
    5. CVC/CVV: 124

    *Ожидаемый результат:* под полем с номером года видно уведомление "Неверный формат"

14. **Отправка формы без указания владельца карты** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 12
    3. Год: 24
    4. Имя владельца оставить пустым
    5. CVC/CVV: 628

    *Ожидаемый результат:* под полем для имени владельца видно уведомление "Поле обязательно для заполнения"

15. **Отправка формы без указания CVC/CVV кода** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 05
    3. Год: 23
    4. Владелец: ALEKSEY PANIN
    5. CVC/CVV оставить пустым

    *Ожидаемый результат:* под полем для CVC/CVV кода видно уведомление "Неверный формат"

16. **Отправка пустой формы** — пример тестовых данных: все поля оставить пустыми.
    *Ожидаемый результат:* под полями для номера карты, месяца, года и CVC/CVV кода видны уведомления "Неверный формат", под полем для владельца карты видно уведомление "Поле обязательно для заполнения"

##### Проверки для поля с номером карты
17. **Отправка формы с номером карты длиной 15 цифр** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 444
    2. Месяц: 11
    3. Год: 25
    4. Владелец: POLINA POLYAKOVA
    5. CVC/CVV: 768

    *Ожидаемый результат:* под полем с номером карты видно уведомление "Неверный формат"

18. **Ввод номера карты длиной 17 цифр (без отправки формы)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 44445
    
    *Ожидаемый результат:* невозможно ввести лишнюю цифру, в значении поля для номера карты отображаются первые 16 введённых цифр.

19. **Ввод в поле для номера карты невалидных символов (без отправки формы)** — пример тестовых данных:
    1. Номер карты: QWAS ТРЕП ;*:~      !?"}{
    
    *Ожидаемый результат:* невозможно ввести невалидные символы, значение поля не заполнено

20. **Отправка формы с номером карты, состоящим из нулей** — пример тестовых данных:
    1. Номер карты: 0000 0000 0000 0000
    2. Месяц: 11
    3. Год: 25
    4. Владелец: POLINA POLYAKOVA
    5. CVC/CVV: 768

    *Ожидаемый результат:* под полем с номером карты видно уведомление "Неверный формат"

##### Проверки для поля с номером месяца
21. **Отправка формы с нулевым месяцем** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 00
    3. Год: 25
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с номером месяца видно уведомление "Неверный формат"

22. **Отправка формы с несуществующим месяцем** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 13
    3. Год: 23
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 723

    *Ожидаемый результат:* под полем с номером месяца видно уведомление "Неверно указан срок действия карты"

23. **Отправка формы с месяцем неверного формата: менее 2 цифр**. Пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 6
    3. Год: 23
    4. Владелец: IGOR OVCHARENKO
    5. CVC/CVV: 723

    *Ожидаемый результат:* под полем с номером месяца видно уведомление "Неверный формат"

24. **Ввод месяца неверного формата: более 2 цифр (без отправки формы)**. Пример тестовых данных:
    1. Месяц: 123

    *Ожидаемый результат:* невозможно ввести лишнюю цифру, в значении поля для номера месяца отображаются первые 2 введённые цифры.

25. **Ввод в поле месяца невалидных символов (без отправки формы)**. Пример тестовых данных:
    1. Месяц: п:Ё}{/|>{}/*

    *Ожидаемый результат:* невозможно ввести невалидные символы, значение поля не заполнено

##### Проверки для поля с номером года
26. **Отправка формы с нулевым годом** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 08
    3. Год: 00
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с номером года видно уведомление "Истёк срок действия карты"

27. **Отправка формы с годом неверного формата: менее 2 цифр**. Пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 06
    3. Год: 2
    4. Владелец: IGOR OVCHARENKO
    5. CVC/CVV: 723

    *Ожидаемый результат:* под полем с номером года видно уведомление "Неверный формат"

28. **Ввод года неверного формата: более 2 цифр (без отправки формы)**. Пример тестовых данных:
    1. Год: 233

    *Ожидаемый результат:* невозможно ввести лишнюю цифру, в значении поля для номера года отображаются первые 2 введённые цифры.

29. **Ввод в поле года невалидных символов (без отправки формы)**. Пример тестовых данных:
    1. Год: ар";;%:?*Ё№dgdhh;%:?

    *Ожидаемый результат:* невозможно ввести невалидные символы, значение поля не заполнено

30. **Отправка формы с предыдущим годом** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 02
    3. Год: ввести год на 1 меньше текущего (для 2022 года - ввести значение "21")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с номером года видно уведомление "Истёк срок действия карты"

31. **Отправка формы с годом на 6 лет больше текущего (считаем, что макс. срок карты - 5 лет)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 02
    3. Год: ввести год на 6 больше текущего (для 2022 года - ввести значение "28")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с номером года видно уведомление "Неверно указан срок действия карты"

##### Проверка ввода истёкшего срока действия карты
32. **Отправка формы с истекшим сроком (на месяц ранее текущего)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: предыдущий месяц (для данной работы - ввести значение "10")
    3. Год: год предыдущего месяца (для данной работы - ввести значение "22")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248

    *Ожидаемый результат:* на странице видно уведомление "Неверно указан срок действия карты"

   <details>
         <summary>А как насчёт карт в России? Они ведь продлены, иногда больше чем на 5 лет!</summary>
         Приложение написано не позже 2019 года. Документации и требований нет, поэтому руководствуюсь <em>здравым смыслом</em> и беру стандартный срок в 5 лет. 
   </details>

##### Проверки для поля с именем владельца карты
33. **Отправка формы с неполным именем (только одно слово в поле)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 10
    3. Год: 25
    4. Владелец: ANDREY
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с именем владельца видно уведомление "Введите имя и фамилию, как указано на карте"

34. **Отправка формы с кирилическими символами  имени владельца** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: Андрей Разумовский
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с именем владельца видно уведомление "Только латинские символы (A-Z), пробел и дефис"

35. **Отправка формы с невалидными символами в имени владельца** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: *Lapochka! {Ki$$}
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с именем владельца видно уведомление "Только латинские символы (A-Z), пробел и дефис"

36. **Отправка формы с пробелами в имени владельца** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: "           " (только пробелы)
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с именем владельца видно уведомление "Поле обязательно для заполнения"

37. **Отправка формы с именем владельца 28 символов (включая пробел)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: ALEKSANDRIA SKOROPOSTIZHNAYA
    5. CVC/CVV: 248

    *Ожидаемый результат:* под полем с именем владельца видно уведомление "Проверьте введённое имя"

    <details>
         <summary>Почему длина не более 27 символов?</summary>
         Удалось нагуглить, что кол-во символов в имени на карте регулируется стандартами ISO/IEC 7813 и ISO/IEC 7811-1. Последний - конкернто про печать символов на карте, и, как я понимаю, там допустимая длина в 27 символов, включая пробел.
         А очень хотелось бы читать требования к тестируемой системе, конечно...
    </details>

##### Проверки для поля с CVC/CVV кодом
38. **Отправка формы с CVC/CVV неверного формата: менее 3 цифр**. Пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 06
    3. Год: 24
    4. Владелец: IGOR OVCHARENKO
    5. CVC/CVV: 72

    *Ожидаемый результат:* под полем с CVC/CVV видно уведомление "Неверный формат"

39. **Ввод CVC/CVV неверного формата: более 3 цифр (без отправки формы)**. Пример тестовых данных:
    1. CVC/CVV: 5474

    *Ожидаемый результат:* невозможно ввести лишнюю цифру, в значении поля для CVC/CVV отображаются первые 3 введённые цифры.

40. **Ввод в поле CVC/CVV невалидных символов (без отправки формы)**. Пример тестовых данных:
    1. CVC/CVV: f#$^*~

    *Ожидаемый результат:* невозможно ввести невалидные символы, значение поля не заполнено

### Выдача кредита по данным карты
#### Позитивные сценарии
41. **Кредит одобрен** — использование номера карты со статусом APPROVED и валидных данных, например:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 02
    3. Год: 25
    4. Владелец: IVAN ABRAMOV
    5. CVC/CVV: 456
   

42. **Отправка формы с годом на 5 лет больше текущего (граничное значение)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 02
    3. Год: ввести год на 5 больше текущего (для 2022 года - ввести значение "27")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248


43. **Отправка формы с годом на 4 года больше текущего (ниже граничного значения)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 02
    3. Год: ввести год на 4 больше текущего (для 2022 года - ввести значение "26")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248


44. **Отправка формы со сроком действия карты, истекающем в текущем месяце (граничное значение)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: текущий месяц (для данной работы - ввести значение "11")
    3. Год: текущий год (для данной работы - ввести значение "22")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248


45. **Отправка формы со сроком действия карты, истекающем в следующем месяце (выше граничного значения)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: следующий месяц (для данной работы - ввести значение "12")
    3. Год: год следующего месяца (например, если текущий месяц/год — 12/22, тогда следующий месяц - 01 и год 23; для данной работы - ввести значение "22")
    4. Владелец: ANDREY KASHIN
    5. CVC/CVV: 248
    

46. **Отправка формы с именем владельца длиной 26 символов (включая пробел)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: ALEXANDRA SKOROPOSTIZHNAYA
    5. CVC/CVV: 248

47. **Отправка формы с именем владельца длиной 27 символов (включая пробел)** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: ALEKSANDRA SKOROPOSTIZHNAYA
    5. CVC/CVV: 248
    
   <details>
        <summary>Почему длина не более 27 символов?</summary>
        Удалось нагуглить, что кол-во символов в имени на карте регулируется стандартами ISO/IEC 7813 и ISO/IEC 7811-1. Последний - конкретно про печать символов на карте, и, как я понимаю, там допустимая длина в 27 символов, включая пробел.
        А очень хотелось бы читать требования к тестируемой системе, конечно...
   </details>

48. **Отправка формы с именем владельца, содержащим дефис** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 07
    3. Год: 23
    4. Владелец: KALINA-NIKOLAY IVANOV
    5. CVC/CVV: 248
    

49. **Отправка формы с нулевым кодом CVC/CVV** — пример тестовых данных:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 08
    3. Год: 23
    4. Владелец: ZEROINA ZEROYEVA
    5. CVC/CVV: 000
    
    <details>
       <summary>Почему так? Разве такой код не считается небезопасным?</summary>
       Я нашла только подтверждение, что такой код может быть, и что некоторые сервисы его принимают. <a src="https://security.stackexchange.com/questions/200243/all-0s-zeros-in-a-bank-cards-cvc-code">Здесь пруф</a><br>
       Т.к. у меня нет документации и требований к тестируемому сервису, я буду считать этот сценарий позитивным.
    </details>

*Ожидаемый результат во всех позитивных сценариях:* Уведомление об успешном одобрении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля credit_id, и запись в таблицу credit_request_entity со статусом APPROVED)


#### Негативные сценарии
50. **В кредите отказано** — использование номера карты со статусом DECLINED и валидных данных, например:
   1. Номер карты: 4444 4444 4444 4442 
   2. Месяц: 10
   3. Год: 24
   4. Владелец: ALINA POKLONSKAYA
   5. CVC/CVV: 746

   *Ожидаемый результат:* Уведомление об отклонении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля credit_id, и запись в таблицу credit_request_entity со статусом DECLINED)

Сценарии №51-80 для негативных проверок (а также ожидаемые результаты) повторяют описанное в разделе негативных сценариев для способа покупки по карте (сценарии №11-40). 
Итого 80 сценариев.

## 2. Перечень используемых инструментов с обоснованием выбора
- Язык программирования Java и система сборки Gradle - для автоматизации тестирования
- Фреймворк Selenide - используется для автоматизации тестирования веб-приложений; упрощает работу с веб-элементами, обеспечивает стабильность тестов, решая проблемы Ajax и Timeout
- Docker - для запуска приложений-контейнеров, включая SUT и СУБД MySQL и PostgreSQL
- DBeaver - создание подключений к БД (для чтения данных)
- Faker - для генерации данных пользователей в тестах
- Фреймворк Allure - для создания визуальных отчётов о прохождении тестирования.

## 3. Перечень и описание возможных рисков при автоматизации
- Отсутствие документации к приложению => достоверно неизвестно, как приложение должно реагировать (например, неизвестны правила валидации полей)
- Нет реальных данных, вместо этого есть симулятор ответов от сервера с возможным приёмом только двух номеров карт. Поэтому успешное прохождение тестов не означает верного поведения системы на проде
- Возникновение проблем в разворачиванием инфраструктуры: запуском контейнеров и SUT 
- Возникновение проблем с подключением к БД
- Проблемы с подбором локаторов для взаимодействия с веб-элементами
- Может измениться дизайн приложения (например, изменение количества полей в формах) - это может повлиять на работоспособность тестов в будущем.


## 4. Интервальная оценка с учётом рисков
- Знакомство с проектом и настройка окружения: 3 часа (уже затрачено)
- План автоматизации: 4,5 часа (уже затрачено)
- Автоматизация: 30 часов
- Отчёт по итогам тестирования: 2 час
- Отчёт по итогам автоматизации: 2 часа

## 5. План сдачи работ: когда будут готовы автотесты, результаты их прогона
- 21.11 - подготовка автотестов 
- 22.11 - отчёт с результатами прогона автотестов, отчёт по итогам автоматизации
