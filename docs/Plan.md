# План автоматизации тестирования

## 1. Перечень автоматизируемых сценариев
### Обычная оплата по карте
#### Позитивные сценарии
1. **Оплата одобрена** — использование номера карты со статусом APPROVED и валидных данных, например:
   1. Номер карты: 4444 4444 4444 4441
   2. Месяц: 02
   3. Год: 25
   4. Владелец: IVAN ABRAMOV
   5. CVC/CVV: 456
   
   *Ожидаемый результат:* Уведомление об успешном одобрении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля payment_id, и запись в таблицу payment_entity со статусом APPROVED)

2. **Оплата отклонена** — использование номера карты со статусом DECLINED и валидных данных, например:
    1. Номер карты: 4444 4444 4444 4442
    2. Месяц: 10
    3. Год: 24
    4. Владелец: ALINA POKLONSKAYA
    5. CVC/CVV: 746

   *Ожидаемый результат:* Уведомление об отклонении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля payment_id, и запись в таблицу payment_entity со статусом DECLINED)

#### Негативные сценарии
1. **Отправка пустой формы** (*Ожидаемый результат:* под каждым полем в форме видно уведомление "Поле обязательно для заполнения")

2. **Отправка формы с неверным номером карты**
   1. Длина номера менее 16 цифр
   2. Длина номера более 16 цифр
   3. Ввод невалидных символов: букв, знаков препинания
   
   (*Ожидаемый результат:* уведомление о неверном формате номера карты)

3. **Отправка формы с неверным сроком карты**
   1. Неверный месяц (можно добавить только значения из списка: 01, 02, 03, 04, 05, 06, 07, 08, 09, 10, 11, 12)
   2. Неверный год (общий срок действия карт - 5 лет, поэтому для в форму нельзя ввести года ранее текущего и позже текущего на 5 лет)
        <details>
        <summary>А как насчёт карт в России? Они ведь продлены, иногда больше чем на 5 лет!</summary>
        Приложение написано не позже 2019 года. Документации и требований нет, поэтому руководствуюсь <em>здравым смыслом</em> и беру стандартный срок в 5 лет. 
        </details>
   3. Истёкший срок действия (например, месяц 08 и год 19)

   (*Ожидаемый результат:* уведомление о неверном формате месяца / года)

4. **Отправка формы с неверным именем**
   1. Неполное имя (если поле содержит только одно слово (например, только имя или только фамилию))
   2. Имя кириллицей
   3. Имя с невалидными символами (цифры, знаки препинания)

   (*Ожидаемый результат:* уведомление о неверном формате имени с перечнем валидных символов)

5. **Отправка формы с неверным кодом CVC/CVV**
   1. Ввод невалидных символов (букв, знаков препинания)
   2. Ввод менее 3 или более 3 цифр

   (*Ожидаемый результат:* уведомление о неверном формате кода)


### Выдача кредита по данным карты
#### Позитивные сценарии
1. **Кредит одобрен** — использование номера карты со статусом APPROVED и валидных данных, например:
    1. Номер карты: 4444 4444 4444 4441
    2. Месяц: 02
    3. Год: 25
    4. Владелец: IVAN ABRAMOV
    5. CVC/CVV: 456

   *Ожидаемый результат:* Уведомление об успешном одобрении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля credit_id, и запись в таблицу credit_request_entity со статусом APPROVED)

2. **В кредите отказано** — использование номера карты со статусом DECLINED и валидных данных, например:
    1. Номер карты: 4444 4444 4444 4442
    2. Месяц: 10
    3. Год: 24
    4. Владелец: ALINA POKLONSKAYA
    5. CVC/CVV: 746

   *Ожидаемый результат:* Уведомление об отклонении операции банком, данные об операции записываются в БД (запись в таблицу order_entity с заполнением поля credit_id, и запись в таблицу credit_request_entity со статусом DECLINED)

#### Негативные сценарии
Сценарии для негативных проверок (а также ожидаемые результаты) повторяют описанное в разделе негативных сценариев для способа покупки по карте.

## 2. Перечень используемых инструментов с обоснованием выбора
- Язык программирования Java и система сборки Gradle - для автоматизации тестирования
- Фреймворк Selenide - используется для автоматизации тестирования веб-приложений; упрощает работу с веб-элементами, обеспечивает стабильность тестов, решая проблемы Ajax и Timeout
- Docker - для запуска приложений-контейнеров, включая SUT и СУБД MySQL и PostgreSQL
- DBeaver - создание подключений к БД (для чтения данных)
- Faker - для генерации данных пользователей в тестах
- Фреймворк Allure - для создания визуальных отчётов о прохождении тестирования.

## 3. Перечень и описание возможных рисков при автоматизации
- Отсутствие документации к приложению => достоверно неизвестно, как приложение должно реагировать (например, неизвестны правила валидации полей)
- Нет реальных данных, вместо этого есть симулятор ответов от сервера с возможным приёмом только двух номеров карт. Поэтому успешное прохождение тестов не означает верного поведения системы на проде
- Возникновение проблем в разворачиванием инфраструктуры: запуском контейнеров и SUT 
- Возникновение проблем с подключением к БД
- Проблемы с подбором локаторов для взаимодействия с веб-элементами
- Может измениться дизайн приложения (например, изменение количества полей в формах) - это может повлиять на работоспособность тестов в будущем.


## 4. Интервальная оценка с учётом рисков
- Знакомство с проектом и настройка окружения: 3 часа (уже затрачено)
- План автоматизации: 2 часа (уже затрачено)
- Автоматизация: 30 часов
- Отчёт по итогам тестирования: 1 час
- Отчёт по итогам автоматизации: 2 часа

## 5. План сдачи работ: когда будут готовы автотесты, результаты их прогона
- 14.11 - подготовка автотестов 
- 15.11 - отчёт с результатами прогона автотестов, отчёт по итогам автоматизации
